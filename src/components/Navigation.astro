---
import BranchSwitch from './BranchSwitch.astro'
import NavigationDropdown from './NavigationDropdown.astro'
import NavigationLinkItem from './NavigationLinkItem.astro'
import { isVisible, loadNavigation } from '../composables/navigation'

const entries = loadNavigation(Astro.url)
---

<ul class="navbar-nav">
    {entries.filter(isVisible).map(entry => entry.children?.some(isVisible)
        ? <NavigationDropdown entry={entry} />
        : <NavigationLinkItem entry={entry} />,
    )}
</ul>

<hr class="d-lg-none text-white-50" />

<BranchSwitch />

<div class="vr d-none d-lg-block text-white-50"></div>
<hr class="d-lg-none text-white-50" />

<ul class="navbar-nav">
    <li class="nav-item social">
        <a class="github-button" href="https://github.com/tinylog-org/tinylog" data-show-count="true">GitHub</a>
    </li>
</ul>
